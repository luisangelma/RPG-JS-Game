function getRandomInt(e,a){return Math.floor(Math.random()*(a-e+1))+e}var selectedCharacter=null,player=null,enemy=null,game=null,gameStatus=null,playerOne=document.getElementById("character-one"),playerTwo=document.getElementById("character-two"),playerThree=document.getElementById("character-three"),characters=[playerOne,playerTwo,playerThree],playerName=document.getElementById("player-name"),startGameBtn=document.getElementById("start-game-button"),attackBtn=document.getElementById("attack-button"),battleArena=document.getElementById("battle-arena"),battleInfo=document.getElementById("battle-info"),battleBonus=document.getElementById("battle-bonus"),battlePlayer=document.getElementById("battle-player"),battlePlayerHp=document.getElementById("player-hp"),battlePlayerAvatar=document.getElementById("player-avatar"),battleEnemy=document.getElementById("battle-enemy"),battleEnemyHp=document.getElementById("enemy-hp"),battleEnemyAvatar=document.getElementById("enemy-avatar"),playerImages=["images/char1.png","images/char2.png","images/char3.png"],enemies=[{name:"Ancient Dragon",avatar:"images/enemy1.png"},{name:"Robotron",avatar:"images/enemy2.png"},{name:"Mighty Centipede",avatar:"images/enemy3.png"}];console.log(enemies.sort());var Character=function(e,a){var t=this;this.name=name,this.hp=a,this.hpElement=null,this.hpStatus=null,this.type=e,this.avatar=null,this.setIdentity=function(){if("player"==e)for(var a=0;a<characters.length;a++)selectedCharacter===characters[a]&&(t.hpElement=battlePlayerHp,t.type="player",t.avatar=playerImages[a],battlePlayerHp.innerHTML=t.hp+"HP",battlePlayerAvatar.src=t.avatar);else if("enemy"==e)for(var n=getRandomInt(0,enemies.length-1),a=0;a<enemies.length;a++)n===a&&(t.name=enemies[a].name,t.hpElement=battleEnemyHp,"enemy"==t.type,t.avatar=enemies[a].avatar,battleEnemyHp.innerHTML=t.hp+"HP",battleEnemyAvatar.src=t.avatar)},this.generateAttackPower=function(){var e=getRandomInt(10,30);return e},this.displayHealth=function(){t.hpElement.innerHTML=t.hp+"HP"},this.setIdentity(),this.healthBonus=function(e){getRandomInt(1,2);t.hp+=e}},Game=function(){var e=this;player=new Character("player",200),player.name=playerName.value,player.hpStatus=!0,enemy=new Character("enemy",100),this.enemyTurn=1,gameStatus=!0,console.log("current enemy turn: "+this.enemyTurn),this.generateEnemy=function(){if(enemy.hp<=0&&e.enemyTurn<enemies.length)enemy=new Character("enemy",100),e.enemyTurn++,console.log("current enemy turn: "+this.enemyTurn);else if(enemy.hp<=0&&e.enemyTurn===enemies.length)return enemy=null},this.processAttack=function(a,t){var n=getRandomInt(1,3);if(3==n)battleInfo.innerHTML=a.name+" missed "+t.name;else{var r=a.generateAttackPower();t.hp-=r,battleInfo.innerHTML=a.name+" attacked "+t.name+" for "+r+" attack power",t.displayHealth()}e.checkHealth()},this.checkHealth=function(){enemy.hp<=0?(battleInfo.innerHTML=player.name+" killed "+enemy.name,e.ramdonHpBonus(),e.generateEnemy()):enemy.hp<=0&&e.enemyTurn===enemies.length?(battleInfo.innerHTML=player.name+" killed "+enemy.name+" and won the battle",enemy.hp=0,enemy.displayHealth(),attackBtn.disabled=!0,attackBtn.className="button inactive"):player.hp<=0&&(battleInfo.innerHTML=enemy.name+" killed "+player.name+" and won the battle",player.hp=0,player.displayHealth(),player.hpStatus=!1,attackBtn.disabled=!0,attackBtn.className="button inactive",console.log("attack button: disabled"))},this.ramdonHpBonus=function(){var e=getRandomInt(1,2);if(1===e){var a=100;player.healthBonus(a),battleBonus.innerHTML=player.name+" received an "+a+" hp bonus",battleBonus.className="battle-message bonus active",player.displayHealth(),setTimeout(function(){battleBonus.className="battle-message bonus"},5e3)}}},initGame=function(){game=new Game};playerOne.addEventListener("click",function(){selectedCharacter=playerOne,playerOne.className="col-3 selection-character--character active",playerTwo.className="col-3 selection-character--character",playerThree.className="col-3 selection-character--character"},!1),playerTwo.addEventListener("click",function(){selectedCharacter=playerTwo,playerOne.className="col-3 selection-character--character",playerTwo.className="col-3 selection-character--character active",playerThree.className="col-3 selection-character--character"},!1),playerThree.addEventListener("click",function(){selectedCharacter=playerThree,playerOne.className="col-3 selection-character--character",playerTwo.className="col-3 selection-character--character",playerThree.className="col-3 selection-character--character active"},!1),startGameBtn.addEventListener("click",function(){selectedCharacter&&""!==playerName.value?(initGame(),battleInfo.innerHTML="Waiting for "+player.name+" to attack",battleArena.className="battle-arena active"):alert("Please select and name you character.")},!1),attackBtn.addEventListener("click",function(){game.processAttack(player,enemy),attackBtn.disabled=!0,attackBtn.className="button inactive",setTimeout(function(){game.processAttack(enemy,player),attackBtn.disabled=!1,attackBtn.className="button",player.hpStatus||(attackBtn.disabled=!0,attackBtn.className="button inactive")},1e3)},!1);